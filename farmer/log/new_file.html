<!DOCTYPE html> 
<html> 
<head> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
    <meta name="keywords" content="天地图"/> 
    <title>天地图－地图API－范例－H5定位</title> 
    <script type="text/javascript" src="http://api.tianditu.com/api?v=4.0"></script> 
 
 
    <script> 
        var map; 
        var zoom = 12; 
 
        function onLoad() { 
            //初始化地图对象 
            map = new T.Map("mapDiv"); 
            //设置显示地图的中心点和级别 
            map.centerAndZoom(new T.LngLat(116.40969, 38.89945), zoom); 
            var lo = new T.Geolocation(); 
           
            fn = function (e) { 
                if (this.getStatus() == 0){ 
                    map.centerAndZoom(e.lnglat, 15) 
                    alert("获取定位坐标："+e.lnglat.lat + "," + e.lnglat.lng) 
                    var marker = new T.Marker(e.lnglat); 
                    map.addOverLay(marker); 
 
                } 
                if(this.getStatus() == 1){ 
                    map.centerAndZoom(e.lnglat, e.level) 
                    alert("获取定位坐标："+e.lnglat.lat + "," + e.lnglat.lng) 
                    var marker = new T.Marker(e.lnglat); 
                    map.addOverLay(marker); 
                } 
            } 
            lo.getCurrentPosition(fn); 
 
        } 
 
 
    </script> 
</head> 
<body onLoad="onLoad()"> 
<div id="mapDiv" style="position:absolute;width:600px; height:500px"></div> 
<div style="position:absolute;left:620px;"> 
    <ul> 
        <li>本示例演示如用H5定位所在城市</li> 
        <p><a href="http://lbs.tianditu.com/api-new/html5/examples.html">返回所有范例列表</a></p> 
    </ul> 
</div> 
</body> 
</html>